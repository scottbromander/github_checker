/*! angular_material_test 2016-07-23 */
var app=angular.module("StarterApp",[]);app.controller("AppCtrl",["$scope","$http",function(a,b){a.user={},a.users=[],a.todayCount=0,a.yesterdayCount=0,a.dblCount=0,a.submitUser=function(c){b.post("/challenge/add",c).then(a.findUser())},a.findUser=function(){b.get("/challenge/all").then(function(b){a.users=b.data,console.log(a.users),c(a.users)})};var c=function(a){for(var c=0;c<a.length;c++){var e=a[c].github;b.get("https://api.github.com/users/"+e+"/repos?sort=updated").success(function(a){d(a)})}},d=function(b){githubPersonName=b[0].owner.login.toLowerCase();for(var c=0,d=0,e=0,f=0;f<a.users.length;f++){if(githubPersonName===a.users[f].github){for(var g=moment().subtract(2,"days").format("L"),h=moment().subtract(1,"days").format("L"),i=moment().format("L"),j=0;j<b.length;j++){var k=moment(b[j].created_at).format("L"),l=moment(b[j].updated_at).format("L"),m=moment(b[j].pushed_at).format("L");console.log(githubPersonName,b[j]),g!=k&&g!=l&&g!=m||(a.users[f].daybefore=!0),h!=k&&h!=l&&h!=m||(a.users[f].yesterday=!0),i!=k&&i!=l&&i!=m||(a.users[f].today=!0)}a.users[f].imageUrl=b[0].owner.avatar_url,a.users[f].link="http://www.github.com/"+githubPersonName}a.users[f].today&&c++,a.users[f].yesterday&&d++,a.users[f].daybefore&&e++,a.todayCount=c,a.yesterdayCount=d,a.dblCount=e}};a.findUser()}]);